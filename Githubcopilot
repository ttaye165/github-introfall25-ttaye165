#Tsion Taye xmv2ex
#The goal of this assignment Verify you can use Microsoft Copilot / GitHub Copilot Chat alongside RStudio 
#to accelerate—but not replace—your coding.

# ------------------------------
# 1) Paths & file I/0
# ------------------------------
# 1.1 Set working directories -------------------------------------------------
# EDIT THESE for your environment
traindir <- "/Users/tsiontaye/Desktop/SYS 3501/Data"
sourcedir <- "/Users/tsiontaye/Desktop/SYS 3501/Source"
stopifnot(dir.exists(traindir))
setwd(traindir)
message("Working directory set to: ", getwd())
# 1.3 Safe CSV read helper ----------------------------------------------------
safe_read <- function(file) {
# Matches read.csv defaults from class, but robust NA handling
read.csv(file, na.strings = c("", "NA", "N/A"," NA", "NA "), stringsAsFactors = FALSE)
}
# 1.4 Read the accident CSV ------------------------------------------------
totacts <- safe_read("Railroad_Equipment_Accident_Incident_Source_Data__Form_54__20250907.csv")
# ------------------------------
names(totacts)

# Filter accidents between 2021 and 2024
# Prompt 1
totacts2124 <- subset(totacts, YEAR >= 2021 & YEAR <= 2024)
#Yes this line is working
#It is creating a new dataframe that inclides the years form 2021-2024

# Prompt 2
totacts2124$CASINJ <- totacts2124$TOTINJ + totacts2124$TOTKLD
#Yes this code is working as intended
#It adds the new column CASINJ to filtered data. 
#It combines the total number of injuries and fatalitites

# Prompt 3
# Create a new YEAR column from IYR
full_year <- function(x) {
  if(x >= 0 & x <= 24) return(2000 + x)  # 00–24 → 2000–2024 
  else return(1900 + x)         # 25–99 → 1925–1999
  }
totacts2124$Year4 <- sapply(totacts2124$Year, full_year)


dim(totacts2124)

#Yes this worked and it gives us the number of rows and columns in the new altered dataset
